<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>å–„æ²»ç¾ - ç§»åŠ¨ç«¯</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: #f5f7fa;
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* ç§»åŠ¨ç«¯åŸºç¡€æ ·å¼ */
        .mobile-container {
            width: 100%;
            min-height: 100vh;
            background: #f5f7fa;
        }

        .mobile-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 16px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .mobile-header h1 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .mobile-header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .back-btn {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
        }

        .mobile-content {
            padding: 16px;
        }

        /* å¡ç‰‡æ ·å¼ */
        .mobile-card {
            background: white;
            border-radius: 12px;
            margin-bottom: 16px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            overflow: hidden;
        }

        .mobile-card-header {
            padding: 20px 16px 16px;
            border-bottom: 1px solid #f0f0f0;
        }

        .mobile-card-header h2 {
            font-size: 18px;
            color: #2c3e50;
            margin-bottom: 4px;
        }

        .mobile-card-header .subtitle {
            font-size: 14px;
            color: #7f8c8d;
        }

        .mobile-card-content {
            padding: 16px;
        }

        /* æŒ‰é’®æ ·å¼ */
        .mobile-btn {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 12px;
        }

        .mobile-btn:last-child {
            margin-bottom: 0;
        }

        .mobile-btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .mobile-btn-secondary {
            background: #f8f9fa;
            color: #495057;
            border: 1px solid #e9ecef;
        }

        .mobile-btn:active {
            transform: scale(0.98);
        }

        /* Tabæ ·å¼ */
        .mobile-tabs {
            display: flex;
            background: white;
            border-radius: 8px;
            padding: 4px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .mobile-tab {
            flex: 1;
            padding: 12px 8px;
            text-align: center;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #7f8c8d;
        }

        .mobile-tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .mobile-tab-content {
            display: none;
        }

        .mobile-tab-content.active {
            display: block;
        }

        /* è§’è‰²é€‰æ‹©é¡µé¢ */
        .role-selection {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            text-align: center;
        }

        .role-selection h1 {
            font-size: 28px;
            color: #2c3e50;
            margin-bottom: 12px;
        }

        .role-selection p {
            color: #7f8c8d;
            font-size: 16px;
            margin-bottom: 40px;
            line-height: 1.5;
        }

        .role-button {
            width: 100%;
            max-width: 280px;
            padding: 18px;
            margin-bottom: 16px;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .role-button-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .role-button-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        /* æ‘ä¸¤å§”ä¸»é¡µ */
        .committee-main {
            padding: 16px;
        }

        .step-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
        }

        .step-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .step-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .step-card:active {
            transform: scale(0.98);
        }

        .step-number {
            display: inline-block;
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 32px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .step-title {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .step-desc {
            font-size: 14px;
            color: #7f8c8d;
            line-height: 1.4;
        }

        /* ä¸Šä¼ èœå•æ ·å¼ */
        .upload-menu {
            background: white;
            border-radius: 12px;
            margin-top: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .upload-option {
            display: flex;
            align-items: center;
            padding: 20px 16px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-option:last-child {
            border-bottom: none;
        }

        .upload-option:active {
            background: #f8f9fa;
        }

        .upload-icon {
            font-size: 24px;
            margin-right: 16px;
            width: 40px;
            text-align: center;
        }

        .upload-text h5 {
            font-size: 16px;
            color: #2c3e50;
            margin-bottom: 4px;
        }

        .upload-text p {
            font-size: 13px;
            color: #7f8c8d;
            line-height: 1.4;
        }

        /* æ•°æ®é‡‡é›†æ ·å¼ */
        .kanban {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .kanban-column {
            background: white;
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .kanban-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #f0f0f0;
        }

        .kanban-title {
            font-size: 14px;
            font-weight: 600;
            color: #2c3e50;
        }

        .kanban-count {
            background: #667eea;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
        }

        .villager-item {
            background: #f8f9fa;
            border-radius: 6px;
            padding: 8px;
            margin-bottom: 8px;
            font-size: 13px;
        }

        .villager-item:last-child {
            margin-bottom: 0;
        }

        .villager-name {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 4px;
        }

        .villager-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn-small {
            padding: 4px 8px;
            border: none;
            border-radius: 4px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-btn-primary {
            background: #667eea;
            color: white;
        }

        .action-btn-secondary {
            background: #e9ecef;
            color: #495057;
        }

        /* é€šçŸ¥å¯¹è±¡é€‰æ‹© */
        .notification-form {
            background: white;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .form-select {
            width: 100%;
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            background: white;
        }

        .form-textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            resize: vertical;
            min-height: 80px;
        }

        /* æ•°æ®å®¡æ ¸è¡¨æ ¼ */
        .mobile-table {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .table-header {
            background: #f8f9fa;
            padding: 12px 16px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-title {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
        }

        .selected-count {
            font-size: 12px;
            color: #7f8c8d;
        }

        .table-row {
            padding: 16px;
            border-bottom: 1px solid #f0f0f0;
        }

        .table-row:last-child {
            border-bottom: none;
        }

        .row-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .row-name {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
        }

        .row-checkbox {
            width: 18px;
            height: 18px;
        }

        .row-info {
            font-size: 13px;
            color: #7f8c8d;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .row-actions {
            display: flex;
            gap: 8px;
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .status-approved {
            background: #d4edda;
            color: #155724;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-rejected {
            background: #f8d7da;
            color: #721c24;
        }

        /* å†²çªå¤„ç†æ ·å¼ */
        .conflict-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            position: relative;
            overflow: hidden;
        }

        .conflict-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .conflict-header-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .conflict-header-item h4 {
            font-size: 16px;
            color: #2c3e50;
        }

        .conflict-type {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .conflict-field {
            color: #7f8c8d;
            font-size: 13px;
            margin-bottom: 12px;
        }

        .conflict-comparison {
            margin-bottom: 16px;
        }

        .value-box {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            border: 2px solid;
        }

        .value-box.old-value {
            background: #fff5f5;
            border-color: #ff6b6b;
        }

        .value-box.new-value {
            background: #f0fff4;
            border-color: #51cf66;
        }

        .value-label {
            font-size: 11px;
            color: #666;
            margin-bottom: 4px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .value-content {
            font-size: 14px;
            font-weight: 600;
            color: #2c3e50;
        }

        .conflict-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-btn:first-child {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .action-btn.secondary {
            background: #f8f9fa;
            color: #495057;
            border: 1px solid #e9ecef;
        }

        /* æ‘å¤§è¡¨ç®¡ç† */
        .search-bar {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .search-input {
            flex: 1;
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
        }

        .add-btn {
            padding: 12px 16px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
        }

        .villager-card {
            background: white;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .villager-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .villager-name-large {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
        }

        .villager-info {
            font-size: 13px;
            color: #7f8c8d;
            line-height: 1.4;
            margin-bottom: 8px;
        }

        .villager-actions {
            display: flex;
            gap: 8px;
        }

        .icon-btn {
            padding: 8px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .icon-btn-view {
            background: #667eea;
            color: white;
        }

        .icon-btn-edit {
            background: #51cf66;
            color: white;
        }

        /* Toastæ ·å¼ */
        .toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 12px 20px;
            border-radius: 20px;
            font-size: 14px;
            z-index: 1000;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0; }
            20%, 80% { opacity: 1; }
        }

        /* éšè—ç±» */
        .hidden {
            display: none !important;
        }

        /* é¡µé¢åˆ‡æ¢åŠ¨ç”» */
        .page {
            display: none;
            animation: slideIn 0.3s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* æ‰¹é‡æ“ä½œæ  */
        .batch-actions {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 12px 16px;
            border-top: 1px solid #e0e0e0;
            display: none;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }

        .batch-actions.show {
            display: block;
        }

        .batch-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin: 0 4px;
        }

        .batch-approve {
            background: #51cf66;
            color: white;
        }

        .batch-reject {
            background: #ff6b6b;
            color: white;
        }
        /* OCRè¯†åˆ«ç›¸å…³æ ·å¼ */
        .progress-container {
            text-align: center;
            padding: 20px 0;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .progress-text {
            color: #7f8c8d;
            font-size: 14px;
        }

        .field-item {
            background: white;
            border-radius: 12px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .field-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-bottom: 1px solid #dee2e6;
        }

        .field-info {
            flex: 1;
        }

        .field-name {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 4px;
            font-size: 16px;
        }

        .field-meta {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .field-tag {
            background: #e3f2fd;
            color: #1976d2;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .field-tag.required {
            background: #ffebee;
            color: #d32f2f;
        }

        .field-actions {
            display: flex;
            gap: 8px;
        }

        .field-btn {
            background: none;
            border: none;
            padding: 8px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.2s ease;
        }

        .field-btn:hover {
            background: rgba(0,0,0,0.1);
            transform: scale(1.1);
        }

        .field-content {
            padding: 16px;
        }

        .field-preview {
            background: #f8f9fa;
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            color: #6c757d;
            font-size: 14px;
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            padding: 20px;
            position: sticky;
            bottom: 0;
            background: white;
            border-top: 1px solid #dee2e6;
            margin: 0 -20px -20px -20px;
        }

        .action-buttons .mobile-btn {
            flex: 1;
        }

        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            width: 100%;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 20px 0 20px;
            border-bottom: 1px solid #dee2e6;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            margin: 0;
            color: #2c3e50;
            font-size: 18px;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #7f8c8d;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: #f8f9fa;
            color: #2c3e50;
        }

        .modal-body {
            padding: 0 20px;
        }

        .modal-footer {
            display: flex;
            gap: 12px;
            padding: 20px;
            border-top: 1px solid #dee2e6;
            margin-top: 20px;
        }

        .modal-footer .mobile-btn {
            flex: 1;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 14px;
        }

        .form-select, .form-textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.2s ease;
            box-sizing: border-box;
        }

        .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .switch-container {
            display: flex;
            align-items: center;
        }

        .switch {
            position: relative;
            width: 50px;
            height: 28px;
            appearance: none;
            background: #ccc;
            border-radius: 14px;
            outline: none;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .switch:checked {
            background: #667eea;
        }

        .switch:before {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: transform 0.2s ease;
        }

        .switch:checked:before {
            transform: translateX(22px);
        }

        .switch-label {
            margin-left: 12px;
            color: #2c3e50;
            font-size: 14px;
        }

        /* ä»»åŠ¡çœ‹æ¿æ ·å¼ */
        .task-overview {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            color: white;
        }

        .task-status {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .status-icon {
            font-size: 24px;
            margin-right: 12px;
        }

        .status-info {
            flex: 1;
        }

        .status-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .status-subtitle {
            font-size: 14px;
            opacity: 0.9;
        }

        .status-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-badge.active {
            background: #27ae60;
        }

        .progress-section {
            margin-top: 16px;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .progress-label {
            font-size: 14px;
            font-weight: 500;
        }

        .progress-percentage {
            font-size: 18px;
            font-weight: 600;
        }

        .progress-bar-container {
            margin-bottom: 16px;
        }

        .progress-bar-bg {
            background: rgba(255, 255, 255, 0.3);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar-fill {
            background: #27ae60;
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .progress-stats {
            display: flex;
            justify-content: space-between;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            display: block;
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.9;
        }

        .view-switcher {
            display: flex;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 4px;
            margin-bottom: 16px;
        }

        .view-btn {
            flex: 1;
            padding: 8px 16px;
            border: none;
            background: transparent;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            color: #7f8c8d;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .view-btn.active {
            background: white;
            color: #2c3e50;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .kanban-view {
            display: none;
        }

        .kanban-view.active {
            display: block;
        }

        .villager-card {
            background: white;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid #e9ecef;
        }

        .villager-card.completed {
            background: #f8f9fa;
            border-color: #27ae60;
        }

        .villager-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .villager-info .villager-name {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 4px;
        }

        .villager-details {
            font-size: 12px;
            color: #7f8c8d;
        }

        .villager-status {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .villager-status.pending {
            background: #fff3cd;
            color: #856404;
        }

        .villager-status.completed {
            background: #d4edda;
            color: #155724;
        }

        .villager-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .remind-btn {
            background: #e3f2fd;
            color: #1976d2;
        }

        .remind-btn:hover {
            background: #bbdefb;
        }

        .fill-btn {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .fill-btn:hover {
            background: #e1bee7;
        }

        .completion-info {
            padding-top: 8px;
            border-top: 1px solid #e9ecef;
        }

        .completion-time {
            font-size: 12px;
            color: #7f8c8d;
        }

        .batch-actions {
            margin-top: 20px;
            padding-top: 16px;
            border-top: 1px solid #e9ecef;
        }

        /* çº¿ä¸Šé€šçŸ¥ç®€åŒ–æ ·å¼ */
        .notification-form {
            padding: 20px;
        }

        .form-section {
            margin-bottom: 24px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
            margin: 0 0 8px 0;
        }

        .section-subtitle {
            font-size: 14px;
            color: #7f8c8d;
            margin: 0 0 20px 0;
        }

        .form-label {
            display: block;
            font-size: 16px;
            font-weight: 500;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .select-wrapper {
            position: relative;
        }

        .form-select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            background: white;
            color: #2c3e50;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 12px center;
            background-repeat: no-repeat;
            background-size: 16px;
        }

        .form-select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .form-textarea {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            background: white;
            color: #2c3e50;
            resize: vertical;
            min-height: 100px;
            font-family: inherit;
            line-height: 1.5;
        }

        .form-textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .send-notification-btn {
            width: 100%;
            background: #2c3e50;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 16px 20px;
            font-size: 16px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 32px;
        }

        .send-notification-btn:hover {
            background: #34495e;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(44, 62, 80, 0.3);
        }

        .send-notification-btn:active {
            transform: translateY(0);
        }

        .btn-icon {
            font-size: 18px;
        }

        .btn-text {
            font-size: 16px;
        }

        /* æ•°æ®ç»´æŠ¤æ¨¡å—æ ·å¼ */
        .module-tabs {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
        }

        .module-tab {
            flex: 1;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .module-tab.active {
            border-color: #3498db;
            background: #f8fbff;
        }

        .module-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .module-title {
            font-size: 14px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 4px;
        }

        .module-desc {
            font-size: 12px;
            color: #7f8c8d;
        }

        .maintenance-module {
            display: none;
        }

        .maintenance-module.active {
            display: block;
        }

        .module-header {
            margin-bottom: 20px;
        }

        .module-header h2 {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin: 0 0 8px 0;
        }

        .module-header p {
            font-size: 14px;
            color: #7f8c8d;
            margin: 0;
        }

        .task-stats {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }

        .stat-card {
            flex: 1;
            background: white;
            border-radius: 8px;
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .stat-icon {
            font-size: 20px;
        }

        .stat-info {
            flex: 1;
        }

        .stat-number {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 2px;
        }

        .stat-label {
            font-size: 12px;
            color: #7f8c8d;
        }

        .task-list {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .task-item {
            padding: 16px;
            border-bottom: 1px solid #e9ecef;
        }

        .task-item:last-child {
            border-bottom: none;
        }

        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .task-title {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
        }

        .task-status {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-active {
            background: #fff3cd;
            color: #856404;
        }

        .status-completed {
            background: #d4edda;
            color: #155724;
        }

        .task-info {
            font-size: 12px;
            color: #7f8c8d;
            line-height: 1.4;
            margin-bottom: 12px;
        }

        .task-actions {
            display: flex;
            gap: 8px;
        }

    </style>
</head>
<body>
    <div class="mobile-container">
        <!-- è§’è‰²é€‰æ‹©é¡µé¢ -->
        <div id="role-selection" class="page active">
            <div class="role-selection">
                <h1>å–„æ²»ç¾</h1>
                <p>æ•°å­—åŒ–æ‘åŠ¡ç®¡ç†å¹³å°<br>è¯·é€‰æ‹©æ‚¨çš„è§’è‰²å¼€å§‹ä½¿ç”¨</p>
                <button class="role-button role-button-primary" onclick="selectRole('committee')">
                    ğŸ‘¥ æˆ‘æ˜¯æ‘ä¸¤å§”
                </button>
                <button class="role-button role-button-secondary" onclick="selectRole('villager')">
                    ğŸ  æˆ‘æ˜¯æ‘æ°‘
                </button>
            </div>
        </div>

        <!-- æ‘ä¸¤å§”ä¸»é¡µ -->
        <div id="committee-main" class="page">
            <div class="mobile-header">
                <button class="back-btn" onclick="showPage('role-selection')">â† è¿”å›</button>
                <h1>æ‘ä¸¤å§”å·¥ä½œå°</h1>
                <p>æ•°å­—åŒ–æ‘åŠ¡ç®¡ç†</p>
            </div>
            <div class="committee-main">
                <div class="step-grid">
                    <div class="step-card" onclick="showPage('task-startup')">
                        <div class="step-number">1</div>
                        <div class="step-title">ä»»åŠ¡å¯åŠ¨</div>
                        <div class="step-desc">çµæ´»çš„æ•°å­—åŒ–å»ºè¡¨ï¼Œè§£å†³æ•°æ®é‡‡é›†ä¸å½•å…¥æ•ˆç‡ä½ä¸‹çš„é—®é¢˜</div>
                    </div>
                    <div class="step-card" onclick="showPage('data-collection')">
                        <div class="step-number">2</div>
                        <div class="step-title">æ•°æ®é‡‡é›†</div>
                        <div class="step-desc">å¯è§†åŒ–çš„å¤šæ¸ é“ä»»åŠ¡æ‰§è¡Œï¼Œå‡è½»æ•°æ®ä»æºå¤´éš¾ä»¥å®ç°æ•°å­—åŒ–çš„é—®é¢˜</div>
                    </div>
                    <div class="step-card" onclick="showPage('data-review')">
                        <div class="step-number">3</div>
                        <div class="step-title">æ•°æ®å®¡æ ¸ä¸å¯¼å‡º</div>
                        <div class="step-desc">ä¸€é”®ç”Ÿæˆå¯æäº¤æ–‡ä»¶ï¼Œç¡®ä¿æ•°æ®å‡†ç¡®æ€§</div>
                    </div>
                    <div class="step-card" onclick="showPage('data-deposit')">
                        <div class="step-number">4</div>
                        <div class="step-title">æ•°æ®æ²‰æ·€</div>
                        <div class="step-desc">å¸¦å®¡æ ¸æœºåˆ¶çš„æ™ºèƒ½æ›´æ–°ï¼Œè§£å†³æ•°æ®å­¤å²›ä¸èµ„äº§æµå¤±çš„é—®é¢˜</div>
                    </div>
                    <div class="step-card" onclick="showPage('data-maintenance')">
                        <div class="step-number">5</div>
                        <div class="step-title">æ•°æ®ç»´æŠ¤</div>
                        <div class="step-desc">ä¿éšœèµ„äº§çš„æŒç»­"é²œæ´»"ï¼Œç‹¬ç«‹ç®¡ç†æ¨¡å—ï¼Œå¸¸æ€åŒ–æ•°æ®ç»´æŠ¤</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä»»åŠ¡å¯åŠ¨é¡µé¢ -->
        <div id="task-startup" class="page">
            <div class="mobile-header">
                <button class="back-btn" onclick="showPage('committee-main')">â† è¿”å›</button>
                <h1>ä»»åŠ¡å¯åŠ¨</h1>
                <p>çµæ´»çš„æ•°å­—åŒ–å»ºè¡¨</p>
            </div>
            <div class="mobile-content">
                <div class="mobile-tabs">
                    <div class="mobile-tab active" onclick="switchTab('upload')">ä¸Šä¼ </div>
                    <div class="mobile-tab" onclick="switchTab('ocr')">è¯†åˆ«</div>
                </div>

                <!-- ä¸Šä¼ Tab -->
                <div id="upload-tab" class="mobile-tab-content active">
                    <div class="mobile-card">
                        <div class="mobile-card-content">
                            <div style="text-align: center; padding: 20px 0;">
                                <h4 style="margin-bottom: 8px;">ä¸Šä¼ æ–‡ä»¶</h4>
                                <p style="color: #7f8c8d; margin-bottom: 20px;">æ”¯æŒExcelã€PDFã€Wordæ ¼å¼æ–‡ä»¶</p>
                                <button class="mobile-btn mobile-btn-primary" onclick="showUploadMenu()">
                                    ğŸ“ é€‰æ‹©ä¸Šä¼ æ–¹å¼
                                </button>
                            </div>
                            
                            <!-- ä¸Šä¼ é€‰æ‹©èœå• -->
                            <div id="upload-menu" class="upload-menu hidden">
                                <div class="upload-option" onclick="selectUploadType('local')">
                                    <div class="upload-icon">ğŸ“„</div>
                                    <div class="upload-text">
                                        <h5>å¯¼å…¥æœ¬åœ°æ–‡ä»¶</h5>
                                        <p>æ”¯æŒ Excel (.xlsx, .xls)ã€PDFã€Word (.docx, .doc) æ ¼å¼</p>
                                    </div>
                                </div>
                                <div class="upload-option" onclick="selectUploadType('wechat')">
                                    <div class="upload-icon">ğŸ’¬</div>
                                    <div class="upload-text">
                                        <h5>ä»å¾®ä¿¡èŠå¤©è®°å½•å¯¼å…¥</h5>
                                        <p>ä»å¾®ä¿¡èŠå¤©ä¸­é€‰æ‹©å·²å‘é€çš„æ–‡ä»¶</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- è¯†åˆ«Tab -->
                <div id="ocr-tab" class="mobile-tab-content">
                    <div class="mobile-card">
                        <div class="mobile-card-content">
                            <div style="text-align: center; padding: 20px 0;">
                                <h4 style="margin-bottom: 8px;">æ‹ç…§è¯†åˆ«</h4>
                                <p style="color: #7f8c8d; margin-bottom: 20px;">æ‹æ‘„çº¸è´¨è¡¨æ ¼ï¼ŒOCRæ™ºèƒ½è¯†åˆ«</p>
                                <button class="mobile-btn mobile-btn-primary" onclick="startCamera()">
                                    ğŸ“· å¼€å§‹æ‹ç…§
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- OCRè¯†åˆ«ç»“æœé¡µé¢ -->
        <div id="ocr-result" class="page">
            <div class="mobile-header">
                <button class="back-btn" onclick="showPage('task-startup')">â† è¿”å›</button>
                <h1>OCRè¯†åˆ«ç»“æœ</h1>
                <p>ç¡®è®¤å¹¶ç¼–è¾‘å­—æ®µä¿¡æ¯</p>
            </div>
            <div class="mobile-content">
                <!-- è¯†åˆ«è¿›åº¦ -->
                <div id="ocr-progress" class="mobile-card">
                    <div class="mobile-card-content">
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progress-fill"></div>
                            </div>
                            <div class="progress-text" id="progress-text">æ­£åœ¨è¯†åˆ«è¡¨æ ¼å­—æ®µ...</div>
                        </div>
                    </div>
                </div>

                <!-- è¯†åˆ«ç»“æœ -->
                <div id="ocr-fields" class="hidden">
                    <div class="mobile-card">
                        <div class="mobile-card-header">
                            <h2>ğŸ” è¯†åˆ«åˆ° <span id="field-count">5</span> ä¸ªå­—æ®µ</h2>
                            <button class="mobile-btn-secondary" onclick="addCustomField()" style="padding: 6px 12px; font-size: 12px;">+ æ–°å¢å­—æ®µ</button>
                        </div>
                        <div class="mobile-card-content">
                            <p style="color: #7f8c8d; font-size: 14px; margin-bottom: 16px;">è¯·ç¡®è®¤è¯†åˆ«ç»“æœï¼Œå¯ä»¥ä¿®æ”¹å­—æ®µåç§°æˆ–è®¾ç½®æ ¡éªŒè§„åˆ™</p>
                        </div>
                    </div>

                    <!-- å­—æ®µåˆ—è¡¨ -->
                    <div id="field-list">
                        <!-- å­—æ®µé¡¹ä¼šåŠ¨æ€ç”Ÿæˆ -->
                    </div>

                    <!-- æ“ä½œæŒ‰é’® -->
                    <div class="action-buttons">
                        <button class="mobile-btn mobile-btn-secondary" onclick="saveAsDraft()">
                            ğŸ’¾ ä¿å­˜è‰ç¨¿
                        </button>
                        <button class="mobile-btn mobile-btn-primary" onclick="generateForm()">
                            âœ… ç”Ÿæˆè¡¨å•
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- å­—æ®µç¼–è¾‘å¼¹çª— -->
        <div id="field-edit-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ç¼–è¾‘å­—æ®µ</h3>
                    <button class="modal-close" onclick="closeFieldModal()">Ã—</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="form-label">å­—æ®µåç§°</label>
                        <input type="text" id="edit-field-name" class="form-select" placeholder="è¯·è¾“å…¥å­—æ®µåç§°">
                    </div>
                    <div class="form-group">
                        <label class="form-label">å­—æ®µç±»å‹</label>
                        <select id="edit-field-type" class="form-select">
                            <option value="text">æ–‡æœ¬</option>
                            <option value="number">æ•°å­—</option>
                            <option value="phone">æ‰‹æœºå·</option>
                            <option value="idcard">èº«ä»½è¯</option>
                            <option value="email">é‚®ç®±</option>
                            <option value="date">æ—¥æœŸ</option>
                            <option value="select">ä¸‹æ‹‰é€‰æ‹©</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">æ˜¯å¦å¿…å¡«</label>
                        <div class="switch-container">
                            <input type="checkbox" id="edit-field-required" class="switch">
                            <label for="edit-field-required" class="switch-label"></label>
                        </div>
                    </div>
                    <div class="form-group" id="select-options-group" style="display: none;">
                        <label class="form-label">é€‰é¡¹è®¾ç½®</label>
                        <textarea id="edit-field-options" class="form-textarea" placeholder="æ¯è¡Œä¸€ä¸ªé€‰é¡¹ï¼Œä¾‹å¦‚ï¼š&#10;é€‰é¡¹1&#10;é€‰é¡¹2&#10;é€‰é¡¹3"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">æ ¡éªŒè§„åˆ™</label>
                        <textarea id="edit-field-validation" class="form-textarea" placeholder="ä¾‹å¦‚ï¼šæœ€å°é•¿åº¦2ä½ï¼Œæœ€å¤§é•¿åº¦50ä½"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="mobile-btn mobile-btn-secondary" onclick="closeFieldModal()">å–æ¶ˆ</button>
                    <button class="mobile-btn mobile-btn-primary" onclick="saveFieldEdit()">ä¿å­˜</button>
                </div>
            </div>
        </div>

        <!-- æ•°æ®é‡‡é›†é¡µé¢ -->
        <div id="data-collection" class="page">
            <div class="mobile-header">
                <button class="back-btn" onclick="showPage('committee-main')">â† è¿”å›</button>
                <h1>æ•°æ®é‡‡é›†</h1>
                <p>å¤šæ¸ é“ä»»åŠ¡æ‰§è¡Œ</p>
            </div>
            <div class="mobile-content">
                <div class="mobile-tabs">
                    <div class="mobile-tab active" onclick="switchCollectionTab('notification')">çº¿ä¸Šé€šçŸ¥</div>
                    <div class="mobile-tab" onclick="switchCollectionTab('form')">å¡«æŠ¥ç•Œé¢</div>
                    <div class="mobile-tab" onclick="switchCollectionTab('offline')">çº¿ä¸‹ä»£å¡«</div>
                    <div class="mobile-tab" onclick="switchCollectionTab('kanban')">ä»»åŠ¡çœ‹æ¿</div>
                </div>

                <!-- çº¿ä¸Šé€šçŸ¥ -->
                <div id="notification-tab" class="mobile-tab-content active">
                    <div class="notification-form">
                        <div class="form-section">
                            <h2 class="section-title">å‘é€é€šçŸ¥</h2>
                            <p class="section-subtitle">å‘æ‘æ°‘å‘é€å¡«æŠ¥é€šçŸ¥</p>
                        </div>

                        <div class="form-section">
                            <label class="form-label">é€šçŸ¥å¯¹è±¡</label>
                            <div class="select-wrapper">
                                <select class="form-select" id="notification-target">
                                    <option value="">é€‰æ‹©é€šçŸ¥èŒƒå›´</option>
                                    <option value="all">å…¨ä½“æ‘æ°‘</option>
                                    <option value="group1">ç¬¬1ç»„</option>
                                    <option value="group2">ç¬¬2ç»„</option>
                                    <option value="incomplete">æœªå®Œæˆæ‘æ°‘</option>
                                    <option value="custom">è‡ªå®šä¹‰é€‰æ‹©</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-section">
                            <label class="form-label">é€šçŸ¥å†…å®¹</label>
                            <textarea class="form-textarea" id="notification-content" rows="4" placeholder="è¯·å„ä½æ‘æ°‘åŠæ—¶å®Œæˆ2024å¹´åº¦äººå£æ™®æŸ¥ä¿¡æ¯å¡«æŠ¥ï¼Œæˆªæ­¢æ—¥æœŸä¸º12æœˆ31æ—¥...">è¯·å„ä½æ‘æ°‘åŠæ—¶å®Œæˆ2024å¹´åº¦äººå£æ™®æŸ¥ä¿¡æ¯å¡«æŠ¥ï¼Œæˆªæ­¢æ—¥æœŸä¸º12æœˆ31æ—¥...</textarea>
                        </div>

                        <button class="send-notification-btn" onclick="sendNotification()">
                            <span class="btn-icon">âœˆï¸</span>
                            <span class="btn-text">å‘é€é€šçŸ¥</span>
                        </button>
                    </div>
                </div>

                <!-- å¡«æŠ¥ç•Œé¢ -->
                <div id="form-tab" class="mobile-tab-content">
                    <div class="mobile-card">
                        <div class="mobile-card-header">
                            <h2>æ‘æ°‘å¡«æŠ¥ç•Œé¢é¢„è§ˆ</h2>
                        </div>
                        <div class="mobile-card-content">
                            <div class="form-group">
                                <label class="form-label">å§“å</label>
                                <input type="text" class="form-select" value="å¼ ä¸‰" readonly style="background: #f8f9fa;">
                            </div>
                            <div class="form-group">
                                <label class="form-label">èº«ä»½è¯å·</label>
                                <input type="text" class="form-select" value="320***********1234" readonly style="background: #f8f9fa;">
                            </div>
                            <div class="form-group">
                                <label class="form-label">è”ç³»ç”µè¯</label>
                                <input type="text" class="form-select" placeholder="è¯·è¾“å…¥è”ç³»ç”µè¯">
                            </div>
                            <div class="form-group">
                                <label class="form-label">èŒä¸š</label>
                                <input type="text" class="form-select" placeholder="è¯·è¾“å…¥èŒä¸š">
                            </div>
                        </div>
                    </div>
                    <button class="mobile-btn mobile-btn-secondary" onclick="configureForm()">
                        âš™ï¸ è¡¨å•è®¾ç½®
                    </button>
                </div>

                <!-- çº¿ä¸‹ä»£å¡« -->
                <div id="offline-tab" class="mobile-tab-content">
                    <div class="search-bar">
                        <input type="text" class="search-input" placeholder="æœç´¢æ‘æ°‘å§“å...">
                        <button class="add-btn" onclick="searchVillager()">æœç´¢</button>
                    </div>
                    
                    <div class="villager-card" onclick="fillForVillager('å¼ ä¸‰')">
                        <div class="villager-header">
                            <span class="villager-name-large">å¼ ä¸‰</span>
                            <span class="status-badge status-pending">å¾…å¡«æŠ¥</span>
                        </div>
                        <div class="villager-info">
                            èº«ä»½è¯ï¼š320***********1234<br>
                            ç”µè¯ï¼š138****1234
                        </div>
                    </div>
                    
                    <div class="villager-card" onclick="fillForVillager('æå››')">
                        <div class="villager-header">
                            <span class="villager-name-large">æå››</span>
                            <span class="status-badge status-pending">å¾…å¡«æŠ¥</span>
                        </div>
                        <div class="villager-info">
                            èº«ä»½è¯ï¼š320***********1234<br>
                            ç”µè¯ï¼š139****5678
                        </div>
                    </div>
                </div>

                <!-- ä»»åŠ¡çœ‹æ¿ -->
                <div id="kanban-tab" class="mobile-tab-content">
                    <!-- ä»»åŠ¡çŠ¶æ€æ¦‚è§ˆ -->
                    <div class="task-overview">
                        <div class="task-status">
                            <div class="status-icon">ğŸ“Š</div>
                            <div class="status-info">
                                <div class="status-title">2025å¹´åº¦äººå£æ™®æŸ¥</div>
                                <div class="status-subtitle">æ•°æ®é‡‡é›†è¿›è¡Œä¸­</div>
                            </div>
                            <div class="status-badge active">è¿›è¡Œä¸­</div>
                        </div>
                        
                        <!-- è¿›åº¦æ¡ -->
                        <div class="progress-section">
                            <div class="progress-header">
                                <span class="progress-label">å®Œæˆè¿›åº¦</span>
                                <span class="progress-percentage">85%</span>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar-bg">
                                    <div class="progress-bar-fill" style="width: 85%"></div>
                                </div>
                            </div>
                            <div class="progress-stats">
                                <div class="stat-item">
                                    <span class="stat-number">85</span>
                                    <span class="stat-label">å·²å®Œæˆ</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number">15</span>
                                    <span class="stat-label">æœªå®Œæˆ</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number">100</span>
                                    <span class="stat-label">æ€»è®¡</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- è§†å›¾åˆ‡æ¢ -->
                    <div class="view-switcher">
                        <button class="view-btn active" onclick="switchKanbanView('incomplete')">
                            æœªå®Œæˆ (15)
                        </button>
                        <button class="view-btn" onclick="switchKanbanView('completed')">
                            å·²å®Œæˆ (85)
                        </button>
                    </div>

                    <!-- æœªå®Œæˆä»»åŠ¡åˆ—è¡¨ -->
                    <div id="incomplete-view" class="kanban-view active">
                        <div class="villager-list">
                            <div class="villager-card">
                                <div class="villager-header">
                                    <div class="villager-info">
                                        <div class="villager-name">å¼ ä¸‰</div>
                                        <div class="villager-details">320***1234 | ç¬¬1ç»„</div>
                                    </div>
                                    <div class="villager-status pending">å¾…å¡«æŠ¥</div>
                                </div>
                                <div class="villager-actions">
                                    <button class="action-btn remind-btn" onclick="remindVillager('å¼ ä¸‰')">
                                        ğŸ“¢ æé†’
                                    </button>
                                    <button class="action-btn fill-btn" onclick="fillForVillager('å¼ ä¸‰')">
                                        âœï¸ ä»£å¡«
                                    </button>
                                </div>
                            </div>
                            
                            <div class="villager-card">
                                <div class="villager-header">
                                    <div class="villager-info">
                                        <div class="villager-name">æå››</div>
                                        <div class="villager-details">320***5678 | ç¬¬1ç»„</div>
                                    </div>
                                    <div class="villager-status pending">å¾…å¡«æŠ¥</div>
                                </div>
                                <div class="villager-actions">
                                    <button class="action-btn remind-btn" onclick="remindVillager('æå››')">
                                        ğŸ“¢ æé†’
                                    </button>
                                    <button class="action-btn fill-btn" onclick="fillForVillager('æå››')">
                                        âœï¸ ä»£å¡«
                                    </button>
                                </div>
                            </div>
                            
                            <div class="villager-card">
                                <div class="villager-header">
                                    <div class="villager-info">
                                        <div class="villager-name">ç‹äº”</div>
                                        <div class="villager-details">320***9012 | ç¬¬2ç»„</div>
                                    </div>
                                    <div class="villager-status pending">å¾…å¡«æŠ¥</div>
                                </div>
                                <div class="villager-actions">
                                    <button class="action-btn remind-btn" onclick="remindVillager('ç‹äº”')">
                                        ğŸ“¢ æé†’
                                    </button>
                                    <button class="action-btn fill-btn" onclick="fillForVillager('ç‹äº”')">
                                        âœï¸ ä»£å¡«
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- æ‰¹é‡æ“ä½œ -->
                        <div class="batch-actions">
                            <button class="mobile-btn mobile-btn-primary" onclick="batchRemind()">
                                ğŸ“¢ æ‰¹é‡å‚¬åŠ
                            </button>
                        </div>
                    </div>

                    <!-- å·²å®Œæˆä»»åŠ¡åˆ—è¡¨ -->
                    <div id="completed-view" class="kanban-view">
                        <div class="villager-list">
                            <div class="villager-card completed">
                                <div class="villager-header">
                                    <div class="villager-info">
                                        <div class="villager-name">èµµå…­</div>
                                        <div class="villager-details">320***1111 | ç¬¬1ç»„</div>
                                    </div>
                                    <div class="villager-status completed">å·²å®Œæˆ</div>
                                </div>
                                <div class="completion-info">
                                    <span class="completion-time">å®Œæˆæ—¶é—´ï¼š2024-12-01 14:20</span>
                                </div>
                            </div>
                            
                            <div class="villager-card completed">
                                <div class="villager-header">
                                    <div class="villager-info">
                                        <div class="villager-name">å­™ä¸ƒ</div>
                                        <div class="villager-details">320***2222 | ç¬¬2ç»„</div>
                                    </div>
                                    <div class="villager-status completed">å·²å®Œæˆ</div>
                                </div>
                                <div class="completion-info">
                                    <span class="completion-time">å®Œæˆæ—¶é—´ï¼š2024-12-01 13:45</span>
                                </div>
                            </div>
                            
                            <div class="villager-card completed">
                                <div class="villager-header">
                                    <div class="villager-info">
                                        <div class="villager-name">å‘¨å…«</div>
                                        <div class="villager-details">320***3333 | ç¬¬1ç»„</div>
                                    </div>
                                    <div class="villager-status completed">å·²å®Œæˆ</div>
                                </div>
                                <div class="completion-info">
                                    <span class="completion-time">å®Œæˆæ—¶é—´ï¼š2024-12-01 12:30</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ•°æ®å®¡æ ¸ä¸å¯¼å‡ºé¡µé¢ -->
        <div id="data-review" class="page">
            <div class="mobile-header">
                <button class="back-btn" onclick="showPage('committee-main')">â† è¿”å›</button>
                <h1>æ•°æ®å®¡æ ¸ä¸å¯¼å‡º</h1>
                <p>ä¸€é”®ç”Ÿæˆå¯æäº¤æ–‡ä»¶</p>
            </div>
            <div class="mobile-content">
                <div class="mobile-table">
                    <div class="table-header">
                        <div class="table-title">æ•°æ®æ€»è§ˆ</div>
                        <div class="selected-count" id="selected-count">å·²é€‰æ‹© 0 é¡¹</div>
                    </div>
                    
                    <div class="table-row">
                        <div class="row-header">
                            <span class="row-name">å¼ ä¸‰</span>
                            <input type="checkbox" class="row-checkbox" onchange="updateSelection()">
                        </div>
                        <div class="row-info">
                            èº«ä»½è¯ï¼š320***********1234<br>
                            ç”µè¯ï¼š138****1234 | èŒä¸šï¼šå†œæ°‘
                        </div>
                        <div class="row-actions">
                            <span class="status-badge status-approved">å·²å®¡æ ¸</span>
                            <button class="action-btn-small action-btn-primary" onclick="approveRow(this)" disabled>å®¡æ ¸</button>
                            <button class="action-btn-small action-btn-secondary" onclick="rejectRow(this)" disabled>é©³å›</button>
                        </div>
                    </div>
                    
                    <div class="table-row">
                        <div class="row-header">
                            <span class="row-name">æå››</span>
                            <input type="checkbox" class="row-checkbox" onchange="updateSelection()">
                        </div>
                        <div class="row-info">
                            èº«ä»½è¯ï¼š320***********1234<br>
                            ç”µè¯ï¼š139****5678 | èŒä¸šï¼šå†œæ°‘
                        </div>
                        <div class="row-actions">
                            <span class="status-badge status-pending">å¾…å®¡æ ¸</span>
                            <button class="action-btn-small action-btn-primary" onclick="approveRow(this)">å®¡æ ¸</button>
                            <button class="action-btn-small action-btn-secondary" onclick="rejectRow(this)">é©³å›</button>
                        </div>
                    </div>
                    
                    <div class="table-row">
                        <div class="row-header">
                            <span class="row-name">ç‹äº”</span>
                            <input type="checkbox" class="row-checkbox" onchange="updateSelection()">
                        </div>
                        <div class="row-info">
                            èº«ä»½è¯ï¼š320***********1234<br>
                            ç”µè¯ï¼š137****9012 | èŒä¸šï¼šå†œæ°‘
                        </div>
                        <div class="row-actions">
                            <span class="status-badge status-pending">å¾…å®¡æ ¸</span>
                            <button class="action-btn-small action-btn-primary" onclick="approveRow(this)">å®¡æ ¸</button>
                            <button class="action-btn-small action-btn-secondary" onclick="rejectRow(this)">é©³å›</button>
                        </div>
                    </div>
                </div>

                <!-- å¯¼å‡ºé…ç½® -->
                <div class="mobile-card" style="margin-top: 16px;">
                    <div class="mobile-card-header">
                        <h2>å¯¼å‡ºé…ç½®</h2>
                    </div>
                    <div class="mobile-card-content">
                        <div class="form-group">
                            <label class="form-label">æ–‡ä»¶åç§°</label>
                            <input type="text" class="form-select" value="2024å¹´åº¦äººå£æ™®æŸ¥æ•°æ®">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å¯¼å‡ºæ ¼å¼</label>
                            <select class="form-select">
                                <option>Excel (.xlsx)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">å¯¼å‡ºèŒƒå›´</label>
                            <select class="form-select">
                                <option>å…¨éƒ¨æ•°æ®</option>
                                <option>ä»…å·²å®¡æ ¸</option>
                                <option>ä»…å¾…å®¡æ ¸</option>
                            </select>
                        </div>
                        <button class="mobile-btn mobile-btn-primary" onclick="exportData()">
                            ğŸ“¥ å¯¼å‡ºExcel
                        </button>
                    </div>
                </div>

                <!-- ä¾¿æ·æäº¤ -->
                <div class="mobile-card">
                    <div class="mobile-card-header">
                        <h2>ä¾¿æ·æäº¤</h2>
                    </div>
                    <div class="mobile-card-content">
                        <button class="mobile-btn mobile-btn-secondary" onclick="shareToWechat()">
                            ğŸ’¬ åˆ†äº«åˆ°å¾®ä¿¡
                        </button>
                        <button class="mobile-btn mobile-btn-secondary" onclick="saveToPhone()">
                            ğŸ“± ä¿å­˜åˆ°æ‰‹æœº
                        </button>
                    </div>
                </div>
            </div>

            <!-- æ‰¹é‡æ“ä½œæ  -->
            <div id="batch-actions" class="batch-actions">
                <div style="display: flex; gap: 8px;">
                    <button class="batch-btn batch-approve" onclick="batchApprove()">æ‰¹é‡å®¡æ ¸</button>
                    <button class="batch-btn batch-reject" onclick="batchReject()">æ‰¹é‡é©³å›</button>
                </div>
            </div>
        </div>

        <!-- æ•°æ®æ²‰æ·€é¡µé¢ -->
        <div id="data-deposit" class="page">
            <div class="mobile-header">
                <button class="back-btn" onclick="showPage('committee-main')">â† è¿”å›</button>
                <h1>æ•°æ®æ²‰æ·€ï¼šæ›´æ–°æ•°æ®</h1>
                <p>æ•°æ®å†²çªå¤„ç†</p>
            </div>
            <div class="mobile-content">
                <div class="mobile-card">
                    <div class="mobile-card-header">
                        <h2>æ•°æ®å†²çªå¤„ç†</h2>
                        <span class="status-badge status-rejected" style="background: #ff4757;">2 å¾…å¤„ç†</span>
                    </div>
                    <div class="mobile-card-content">
                        <p style="text-align: center; color: #7f8c8d; margin-bottom: 20px;">éœ€è¦äººå·¥å®¡æ ¸çš„æ•°æ®å†²çª</p>
                    </div>
                </div>

                <!-- å†²çªé¡¹1 -->
                <div class="conflict-card">
                    <div class="conflict-header-item">
                        <h4>å¼ ä¸‰</h4>
                        <span class="conflict-type">ç”µè¯å˜æ›´</span>
                    </div>
                    <div class="conflict-field">å­—æ®µï¼šç”µè¯å·ç </div>
                    <div class="conflict-comparison">
                        <div class="value-box old-value">
                            <div class="value-label">åŸå€¼</div>
                            <div class="value-content">138****1234</div>
                        </div>
                        <div class="value-box new-value">
                            <div class="value-label">æ–°å€¼</div>
                            <div class="value-content">138****5678</div>
                        </div>
                    </div>
                    <div class="conflict-actions">
                        <button class="action-btn" onclick="resolveConflict(this, 'accept')">é‡‡çº³æ–°å€¼</button>
                        <button class="action-btn secondary" onclick="resolveConflict(this, 'keep')">ä¿ç•™æ—§å€¼</button>
                        <button class="action-btn secondary" onclick="resolveConflict(this, 'manual')">æ‰‹åŠ¨ä¿®æ”¹</button>
                    </div>
                </div>

                <!-- å†²çªé¡¹2 -->
                <div class="conflict-card">
                    <div class="conflict-header-item">
                        <h4>æå››</h4>
                        <span class="conflict-type">åœ°å€å˜æ›´</span>
                    </div>
                    <div class="conflict-field">å­—æ®µï¼šå®¶åº­ä½å€</div>
                    <div class="conflict-comparison">
                        <div class="value-box old-value">
                            <div class="value-label">åŸå€¼</div>
                            <div class="value-content">æ‘ä¸œè·¯123å·</div>
                        </div>
                        <div class="value-box new-value">
                            <div class="value-label">æ–°å€¼</div>
                            <div class="value-content">æ‘ä¸œè·¯125å·</div>
                        </div>
                    </div>
                    <div class="conflict-actions">
                        <button class="action-btn" onclick="resolveConflict(this, 'accept')">é‡‡çº³æ–°å€¼</button>
                        <button class="action-btn secondary" onclick="resolveConflict(this, 'keep')">ä¿ç•™æ—§å€¼</button>
                        <button class="action-btn secondary" onclick="resolveConflict(this, 'manual')">æ‰‹åŠ¨ä¿®æ”¹</button>
                    </div>
                </div>

                <button class="mobile-btn mobile-btn-primary" onclick="showPage('data-maintenance')">
                    âœ… å¤„ç†å®Œæˆï¼ŒæŸ¥çœ‹æ‘å¤§è¡¨
                </button>
            </div>
        </div>

        <!-- æ•°æ®ç»´æŠ¤é¡µé¢ -->
        <div id="data-maintenance" class="page">
            <div class="mobile-header">
                <button class="back-btn" onclick="showPage('committee-main')">â† è¿”å›</button>
                <h1>æ•°æ®ç»´æŠ¤</h1>
                <p>å¸¸æ€åŒ–æ•°æ®ç»´æŠ¤</p>
            </div>
            <div class="mobile-content">
                <!-- æ¨¡å—é€‰æ‹© -->
                <div class="module-tabs">
                    <div class="module-tab active" onclick="switchMaintenanceModule('household')">
                        <div class="module-icon">ğŸ‘¥</div>
                        <div class="module-title">æ‘æ°‘æˆ·ç±æ¡£æ¡ˆ</div>
                        <div class="module-desc">ç®¡ç†æ‘æ°‘åŸºæœ¬ä¿¡æ¯</div>
                    </div>
                    <div class="module-tab" onclick="switchMaintenanceModule('task')">
                        <div class="module-icon">ğŸ“Š</div>
                        <div class="module-title">ä»»åŠ¡å·¥ä½œæ•°æ®</div>
                        <div class="module-desc">ç®¡ç†ä»»åŠ¡æ‰§è¡Œæ•°æ®</div>
                    </div>
                </div>

                <!-- æ‘æ°‘æˆ·ç±æ¡£æ¡ˆæ¨¡å— -->
                <div id="household-module" class="maintenance-module active">
                    <div class="module-header">
                        <h2>æ‘æ°‘æˆ·ç±æ¡£æ¡ˆ</h2>
                        <p>ç®¡ç†æ‘æ°‘åŸºæœ¬ä¿¡æ¯å’Œæˆ·ç±èµ„æ–™</p>
                    </div>
                    
                    <div class="search-bar">
                        <input type="text" class="search-input" placeholder="æœç´¢æ‘æ°‘...">
                        <button class="add-btn" onclick="addVillager()">ğŸ‘¤ æ–°å¢</button>
                    </div>

                    <div class="villager-card">
                        <div class="villager-header">
                            <span class="villager-name-large">å¼ ä¸‰</span>
                            <div class="villager-actions">
                                <button class="icon-btn icon-btn-view" onclick="viewVillager('å¼ ä¸‰')">ğŸ‘</button>
                                <button class="icon-btn icon-btn-edit" onclick="editVillager('å¼ ä¸‰')">âœï¸</button>
                            </div>
                        </div>
                        <div class="villager-info">
                            èº«ä»½è¯ï¼š320***********1234<br>
                            ç”µè¯ï¼š138****1234 | ç»„åˆ«ï¼šç¬¬ä¸€ç»„<br>
                            æœ€åæ›´æ–°ï¼š2024-12-01
                        </div>
                    </div>

                    <div class="villager-card">
                        <div class="villager-header">
                            <span class="villager-name-large">æå››</span>
                            <div class="villager-actions">
                                <button class="icon-btn icon-btn-view" onclick="viewVillager('æå››')">ğŸ‘</button>
                                <button class="icon-btn icon-btn-edit" onclick="editVillager('æå››')">âœï¸</button>
                            </div>
                        </div>
                        <div class="villager-info">
                            èº«ä»½è¯ï¼š320***********1234<br>
                            ç”µè¯ï¼š139****5678 | ç»„åˆ«ï¼šç¬¬ä¸€ç»„<br>
                            æœ€åæ›´æ–°ï¼š2024-12-01
                        </div>
                    </div>

                    <div class="villager-card">
                        <div class="villager-header">
                            <span class="villager-name-large">ç‹äº”</span>
                            <div class="villager-actions">
                                <button class="icon-btn icon-btn-view" onclick="viewVillager('ç‹äº”')">ğŸ‘</button>
                                <button class="icon-btn icon-btn-edit" onclick="editVillager('ç‹äº”')">âœï¸</button>
                            </div>
                        </div>
                        <div class="villager-info">
                            èº«ä»½è¯ï¼š320***********1234<br>
                            ç”µè¯ï¼š137****9012 | ç»„åˆ«ï¼šç¬¬ä¸€ç»„<br>
                            æœ€åæ›´æ–°ï¼š2024-12-01
                        </div>
                    </div>

                    <div class="villager-card">
                        <div class="villager-header">
                            <span class="villager-name-large">èµµå…­</span>
                            <div class="villager-actions">
                                <button class="icon-btn icon-btn-view" onclick="viewVillager('èµµå…­')">ğŸ‘</button>
                                <button class="icon-btn icon-btn-edit" onclick="editVillager('èµµå…­')">âœï¸</button>
                            </div>
                        </div>
                        <div class="villager-info">
                            èº«ä»½è¯ï¼š320***********1234<br>
                            ç”µè¯ï¼š136****3456 | ç»„åˆ«ï¼šç¬¬ä¸€ç»„<br>
                            æœ€åæ›´æ–°ï¼š2024-12-01
                        </div>
                    </div>
                </div>

                <!-- ä»»åŠ¡å·¥ä½œæ•°æ®æ¨¡å— -->
                <div id="task-module" class="maintenance-module">
                    <div class="module-header">
                        <h2>ä»»åŠ¡å·¥ä½œæ•°æ®</h2>
                        <p>ç®¡ç†å„é¡¹ä»»åŠ¡çš„æ‰§è¡Œæ•°æ®å’Œç»Ÿè®¡ä¿¡æ¯</p>
                    </div>
                    
                    <div class="task-stats">
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ“‹</div>
                            <div class="stat-info">
                                <div class="stat-number">12</div>
                                <div class="stat-label">è¿›è¡Œä¸­ä»»åŠ¡</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">âœ…</div>
                            <div class="stat-info">
                                <div class="stat-number">45</div>
                                <div class="stat-label">å·²å®Œæˆä»»åŠ¡</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ“Š</div>
                            <div class="stat-info">
                                <div class="stat-number">89%</div>
                                <div class="stat-label">å¹³å‡å®Œæˆç‡</div>
                            </div>
                        </div>
                    </div>

                    <div class="task-list">
                        <div class="task-item">
                            <div class="task-header">
                                <div class="task-title">2025å¹´åº¦äººå£æ™®æŸ¥</div>
                                <div class="task-status status-active">è¿›è¡Œä¸­</div>
                            </div>
                            <div class="task-info">
                                åˆ›å»ºæ—¶é—´ï¼š2024-12-01<br>
                                å®Œæˆè¿›åº¦ï¼š85/100 (85%)<br>
                                è´Ÿè´£äººï¼šæ‘å§”ä¼š
                            </div>
                            <div class="task-actions">
                                <button class="action-btn-small action-btn-primary" onclick="viewTaskData('census2025')">æŸ¥çœ‹æ•°æ®</button>
                                <button class="action-btn-small action-btn-secondary" onclick="exportTaskData('census2025')">å¯¼å‡º</button>
                            </div>
                        </div>

                        <div class="task-item">
                            <div class="task-header">
                                <div class="task-title">ä½ä¿æˆ·ç»Ÿè®¡è°ƒæŸ¥</div>
                                <div class="task-status status-completed">å·²å®Œæˆ</div>
                            </div>
                            <div class="task-info">
                                åˆ›å»ºæ—¶é—´ï¼š2024-11-15<br>
                                å®Œæˆè¿›åº¦ï¼š28/28 (100%)<br>
                                è´Ÿè´£äººï¼šæ°‘æ”¿å§”å‘˜
                            </div>
                            <div class="task-actions">
                                <button class="action-btn-small action-btn-primary" onclick="viewTaskData('subsidy2024')">æŸ¥çœ‹æ•°æ®</button>
                                <button class="action-btn-small action-btn-secondary" onclick="exportTaskData('subsidy2024')">å¯¼å‡º</button>
                            </div>
                        </div>

                        <div class="task-item">
                            <div class="task-header">
                                <div class="task-title">å†œä¸šè¡¥è´´ç”³æŠ¥</div>
                                <div class="task-status status-completed">å·²å®Œæˆ</div>
                            </div>
                            <div class="task-info">
                                åˆ›å»ºæ—¶é—´ï¼š2024-10-20<br>
                                å®Œæˆè¿›åº¦ï¼š67/67 (100%)<br>
                                è´Ÿè´£äººï¼šç»æµå§”å‘˜
                            </div>
                            <div class="task-actions">
                                <button class="action-btn-small action-btn-primary" onclick="viewTaskData('agriculture2024')">æŸ¥çœ‹æ•°æ®</button>
                                <button class="action-btn-small action-btn-secondary" onclick="exportTaskData('agriculture2024')">å¯¼å‡º</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä»£å¡«è¡¨å•é¡µé¢ -->
        <div id="proxy-fill-form" class="page">
            <div class="mobile-header">
                <button class="back-btn" onclick="showPage('data-collection')">â† è¿”å›</button>
                <h1>ä»£å¡«è¡¨å•</h1>
                <p id="proxy-villager-name">ä¸º å¼ ä¸‰ ä»£å¡«è¡¨å•</p>
            </div>
            <div class="mobile-content">
                <div class="mobile-card">
                    <div class="mobile-card-header">
                        <h2>ğŸ“‹ æ‘æ°‘ä¿¡æ¯è¡¨</h2>
                        <div style="font-size: 12px; color: #7f8c8d;">ä»£å¡«äººï¼šæ‘å¹²éƒ¨ | æ—¶é—´ï¼š2024-12-01 15:30</div>
                    </div>
                    <div class="mobile-card-content">
                        <div class="form-group">
                            <label class="form-label">å§“å <span style="color: #e74c3c;">*</span></label>
                            <input type="text" class="form-select" id="proxy-name" value="å¼ ä¸‰" readonly style="background: #f8f9fa;">
                        </div>
                        <div class="form-group">
                            <label class="form-label">èº«ä»½è¯å· <span style="color: #e74c3c;">*</span></label>
                            <input type="text" class="form-select" id="proxy-idcard" value="320***********1234" readonly style="background: #f8f9fa;">
                        </div>
                        <div class="form-group">
                            <label class="form-label">è”ç³»ç”µè¯ <span style="color: #e74c3c;">*</span></label>
                            <input type="text" class="form-select" id="proxy-phone" placeholder="è¯·è¾“å…¥è”ç³»ç”µè¯">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å®¶åº­ä½å€</label>
                            <input type="text" class="form-select" id="proxy-address" placeholder="è¯·è¾“å…¥å®¶åº­ä½å€">
                        </div>
                        <div class="form-group">
                            <label class="form-label">èŒä¸š</label>
                            <select class="form-select" id="proxy-job">
                                <option value="">è¯·é€‰æ‹©èŒä¸š</option>
                                <option value="å†œæ°‘">å†œæ°‘</option>
                                <option value="å·¥äºº">å·¥äºº</option>
                                <option value="æ•™å¸ˆ">æ•™å¸ˆ</option>
                                <option value="åŒ»ç”Ÿ">åŒ»ç”Ÿ</option>
                                <option value="å…¶ä»–">å…¶ä»–</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ä»£å¡«è¯´æ˜</label>
                            <textarea class="form-textarea" id="proxy-note" placeholder="è¯·è¯´æ˜ä»£å¡«åŸå› å’Œæƒ…å†µï¼Œå¦‚ï¼šæ‘æ°‘å¤–å‡ºåŠ¡å·¥æ— æ³•è‡ªè¡Œå¡«æŠ¥ï¼Œå·²ç”µè¯ç¡®è®¤ç›¸å…³ä¿¡æ¯..."></textarea>
                        </div>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="mobile-btn mobile-btn-secondary" onclick="saveDraft()">ğŸ’¾ ä¿å­˜è‰ç¨¿</button>
                    <button class="mobile-btn mobile-btn-primary" onclick="submitProxyForm()">âœ… æäº¤è¡¨å•</button>
                </div>
            </div>
        </div>

        <!-- æ‘æ°‘å¡«æŠ¥é¡µé¢ -->
        <div id="villager-fill-form" class="page">
            <div class="mobile-header">
                <button class="back-btn" onclick="showPage('villager-main')">â† è¿”å›</button>
                <h1>ä¿¡æ¯å¡«æŠ¥</h1>
                <p>è¯·å®Œå–„æ‚¨çš„ä¸ªäººä¿¡æ¯</p>
            </div>
            <div class="mobile-content">
                <div class="mobile-card">
                    <div class="mobile-card-header">
                        <h2>ğŸ“‹ æ‘æ°‘ä¿¡æ¯è¡¨</h2>
                        <div style="font-size: 12px; color: #7f8c8d;">å¡«æŠ¥æ—¶é—´ï¼š2024-12-01 15:30</div>
                    </div>
                    <div class="mobile-card-content">
                        <div class="form-group">
                            <label class="form-label">å§“å <span style="color: #e74c3c;">*</span></label>
                            <input type="text" class="form-select" id="villager-name" value="å¼ ä¸‰" readonly style="background: #f8f9fa;">
                        </div>
                        <div class="form-group">
                            <label class="form-label">èº«ä»½è¯å· <span style="color: #e74c3c;">*</span></label>
                            <input type="text" class="form-select" id="villager-idcard" value="320***********1234" readonly style="background: #f8f9fa;">
                        </div>
                        <div class="form-group">
                            <label class="form-label">è”ç³»ç”µè¯ <span style="color: #e74c3c;">*</span></label>
                            <input type="text" class="form-select" id="villager-phone" placeholder="è¯·è¾“å…¥è”ç³»ç”µè¯">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å®¶åº­ä½å€</label>
                            <input type="text" class="form-select" id="villager-address" placeholder="è¯·è¾“å…¥å®¶åº­ä½å€">
                        </div>
                        <div class="form-group">
                            <label class="form-label">èŒä¸š</label>
                            <select class="form-select" id="villager-job">
                                <option value="">è¯·é€‰æ‹©èŒä¸š</option>
                                <option value="å†œæ°‘">å†œæ°‘</option>
                                <option value="å·¥äºº">å·¥äºº</option>
                                <option value="æ•™å¸ˆ">æ•™å¸ˆ</option>
                                <option value="åŒ»ç”Ÿ">åŒ»ç”Ÿ</option>
                                <option value="å…¶ä»–">å…¶ä»–</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="mobile-btn mobile-btn-secondary" onclick="saveDraft()">ğŸ’¾ ä¿å­˜è‰ç¨¿</button>
                    <button class="mobile-btn mobile-btn-primary" onclick="submitVillagerForm()">âœ… æäº¤è¡¨å•</button>
                </div>
            </div>
        </div>

        <!-- æ‘æ°‘è§†è§’é¡µé¢ -->
        <div id="villager-main" class="page">
            <div class="mobile-header">
                <button class="back-btn" onclick="showPage('role-selection')">â† è¿”å›</button>
                <h1>æ‘æ°‘æœåŠ¡</h1>
                <p>ä¾¿æ°‘ä¿¡æ¯å¡«æŠ¥</p>
            </div>
            <div class="mobile-content">
                <div class="mobile-card">
                    <div class="mobile-card-header">
                        <h2>ğŸ“‹ å¾…å¡«æŠ¥ä»»åŠ¡</h2>
                    </div>
                    <div class="mobile-card-content">
                        <div style="padding: 20px 0; text-align: center;">
                            <h4 style="margin-bottom: 8px;">2024å¹´åº¦äººå£æ™®æŸ¥</h4>
                            <p style="color: #7f8c8d; margin-bottom: 16px;">è¯·åŠæ—¶å®Œæˆä¿¡æ¯å¡«æŠ¥</p>
                            <button class="mobile-btn mobile-btn-primary" onclick="fillForm()">
                                ğŸ“ å¼€å§‹å¡«æŠ¥
                            </button>
                        </div>
                    </div>
                </div>

                <div class="mobile-card">
                    <div class="mobile-card-header">
                        <h2>ğŸ“œ å†å²è®°å½•</h2>
                    </div>
                    <div class="mobile-card-content">
                        <div style="font-size: 14px; color: #7f8c8d; padding: 16px 0;">
                            <div style="margin-bottom: 12px;">
                                <strong>å­£åº¦ä½ä¿æˆ·ç»Ÿè®¡</strong><br>
                                <span style="color: #51cf66;">âœ“ å·²å®Œæˆ</span> | 2024-11-15
                            </div>
                            <div>
                                <strong>æ‘æ°‘å¥åº·æ¡£æ¡ˆæ›´æ–°</strong><br>
                                <span style="color: #51cf66;">âœ“ å·²å®Œæˆ</span> | 2024-10-20
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let currentPage = 'role-selection';
        let currentTab = 'upload';
        let currentCollectionTab = 'kanban';

        // é¡µé¢åˆ‡æ¢å‡½æ•°
        function showPage(pageId) {
            // éšè—æ‰€æœ‰é¡µé¢
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // æ˜¾ç¤ºç›®æ ‡é¡µé¢
            document.getElementById(pageId).classList.add('active');
            currentPage = pageId;
        }

        // è§’è‰²é€‰æ‹©
        function selectRole(role) {
            if (role === 'committee') {
                showPage('committee-main');
            } else {
                showPage('villager-main');
            }
        }

        // Tabåˆ‡æ¢
        function switchTab(tabName) {
            // æ›´æ–°tabçŠ¶æ€
            document.querySelectorAll('.mobile-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // åˆ‡æ¢å†…å®¹
            document.querySelectorAll('.mobile-tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName + '-tab').classList.add('active');
            
            currentTab = tabName;
        }

        // æ•°æ®é‡‡é›†Tabåˆ‡æ¢
        function switchCollectionTab(tabName) {
            // æ›´æ–°tabçŠ¶æ€
            document.querySelectorAll('#data-collection .mobile-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // åˆ‡æ¢å†…å®¹
            document.querySelectorAll('#data-collection .mobile-tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName + '-tab').classList.add('active');
            
            currentCollectionTab = tabName;
        }

        // ä¸Šä¼ èœå•æ˜¾ç¤º/éšè—
        function showUploadMenu() {
            const menu = document.getElementById('upload-menu');
            menu.classList.toggle('hidden');
        }

        // é€‰æ‹©ä¸Šä¼ ç±»å‹
        function selectUploadType(type) {
            const menu = document.getElementById('upload-menu');
            menu.classList.add('hidden');
            
            if (type === 'local') {
                showToast('æ­£åœ¨æ‰“å¼€æ–‡ä»¶é€‰æ‹©å™¨...');
                
                // æ¨¡æ‹Ÿæ–‡ä»¶é€‰æ‹©å’Œä¸Šä¼ è¿‡ç¨‹
                setTimeout(() => {
                    // æ¨¡æ‹Ÿä¸Šä¼ æˆåŠŸçš„æ¦‚ç‡ï¼ˆ95%æˆåŠŸç‡ï¼‰
                    const uploadSuccess = Math.random() > 0.05;
                    
                    if (uploadSuccess) {
                        showToast('æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼');
                        // ä¸Šä¼ æˆåŠŸåè‡ªåŠ¨è·³è½¬åˆ°OCRè¯†åˆ«ç»“æœé¡µé¢
                        setTimeout(() => {
                            showOCRResults();
                        }, 1000);
                    } else {
                        // å¤„ç†ä¸Šä¼ å¤±è´¥çš„æƒ…å†µ
                        showToast('æ–‡ä»¶ä¸Šä¼ å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼æˆ–ç½‘ç»œè¿æ¥');
                        console.error('æœ¬åœ°æ–‡ä»¶ä¸Šä¼ å¤±è´¥');
                    }
                }, 1500);
                
            } else if (type === 'wechat') {
                showToast('æ­£åœ¨è·³è½¬å¾®ä¿¡...');
                
                // æ¨¡æ‹Ÿå¾®ä¿¡æ–‡ä»¶é€‰æ‹©è¿‡ç¨‹
                setTimeout(() => {
                    // æ¨¡æ‹Ÿä»å¾®ä¿¡è·å–æ–‡ä»¶æˆåŠŸçš„æ¦‚ç‡ï¼ˆ90%æˆåŠŸç‡ï¼‰
                    const wechatSuccess = Math.random() > 0.1;
                    
                    if (wechatSuccess) {
                        showToast('ä»å¾®ä¿¡èŠå¤©è®°å½•ä¸­é€‰æ‹©æ–‡ä»¶æˆåŠŸ');
                        // ä¸Šä¼ æˆåŠŸåè‡ªåŠ¨è·³è½¬åˆ°OCRè¯†åˆ«ç»“æœé¡µé¢
                        setTimeout(() => {
                            showOCRResults();
                        }, 1000);
                    } else {
                        // å¤„ç†å¾®ä¿¡æ–‡ä»¶è·å–å¤±è´¥çš„æƒ…å†µ
                        showToast('å¾®ä¿¡æ–‡ä»¶è·å–å¤±è´¥ï¼Œè¯·é‡è¯•æˆ–é€‰æ‹©å…¶ä»–æ–¹å¼');
                        console.error('å¾®ä¿¡æ–‡ä»¶è·å–å¤±è´¥');
                    }
                }, 1500);
            }
        }

        // æ˜¾ç¤ºOCRè¯†åˆ«ç»“æœé¡µé¢ï¼ˆä¸æ‰‹åŠ¨è¯†åˆ«åŠŸèƒ½ä¿æŒä¸€è‡´ï¼‰
        function showOCRResults() {
            try {
                // è°ƒç”¨ç°æœ‰çš„OCRè¯†åˆ«æµç¨‹ï¼Œä¸æ‰‹åŠ¨è¯†åˆ«åŠŸèƒ½å®Œå…¨ä¸€è‡´
                simulateOCR();
            } catch (error) {
                // å¤„ç†å¼‚å¸¸æƒ…å†µ
                console.error('OCRè¯†åˆ«è¿‡ç¨‹å‡ºé”™:', error);
                showToast('è¯†åˆ«è¿‡ç¨‹å‡ºç°å¼‚å¸¸ï¼Œè¯·é‡è¯•');
                // å¼‚å¸¸æ—¶è¿”å›ä»»åŠ¡å¯åŠ¨é¡µé¢
                showPage('task-startup');
            }
        }

        // å¼€å§‹æ‹ç…§
        function startCamera() {
            showToast('æ­£åœ¨å¯åŠ¨ç›¸æœº...');
        }

        // æ•°æ®é‡‡é›†ç›¸å…³å‡½æ•°
        function remindVillager(name) {
            showToast(`å·²å‘${name}å‘é€æé†’`);
        }

        // ä»»åŠ¡çœ‹æ¿è§†å›¾åˆ‡æ¢
        function switchKanbanView(viewType) {
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // åˆ‡æ¢è§†å›¾å†…å®¹
            document.querySelectorAll('.kanban-view').forEach(view => {
                view.classList.remove('active');
            });
            
            if (viewType === 'incomplete') {
                document.getElementById('incomplete-view').classList.add('active');
            } else if (viewType === 'completed') {
                document.getElementById('completed-view').classList.add('active');
            }
        }

        // å‘é€é€šçŸ¥åŠŸèƒ½
        function sendNotification() {
            const target = document.getElementById('notification-target').value;
            const content = document.getElementById('notification-content').value;
            
            if (!target) {
                showToast('è¯·é€‰æ‹©é€šçŸ¥å¯¹è±¡');
                return;
            }
            
            if (!content.trim()) {
                showToast('è¯·è¾“å…¥é€šçŸ¥å†…å®¹');
                return;
            }
            
            // æ¨¡æ‹Ÿå‘é€é€šçŸ¥
            showToast('æ­£åœ¨å‘é€é€šçŸ¥...');
            setTimeout(() => {
                showToast('é€šçŸ¥å‘é€æˆåŠŸï¼');
                // åˆ‡æ¢åˆ°ä»»åŠ¡çœ‹æ¿æŸ¥çœ‹ç»“æœ
                switchCollectionTab('kanban');
            }, 1500);
        }

        // æ•°æ®ç»´æŠ¤æ¨¡å—åˆ‡æ¢
        function switchMaintenanceModule(moduleType) {
            // æ›´æ–°tabçŠ¶æ€
            document.querySelectorAll('.module-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.closest('.module-tab').classList.add('active');

            // åˆ‡æ¢æ¨¡å—å†…å®¹
            document.querySelectorAll('.maintenance-module').forEach(module => {
                module.classList.remove('active');
            });
            
            if (moduleType === 'household') {
                document.getElementById('household-module').classList.add('active');
            } else if (moduleType === 'task') {
                document.getElementById('task-module').classList.add('active');
            }
        }

        // ä»»åŠ¡æ•°æ®ç›¸å…³å‡½æ•°
        function viewTaskData(taskId) {
            showToast(`æ­£åœ¨æŸ¥çœ‹ä»»åŠ¡æ•°æ®ï¼š${taskId}`);
        }

        function exportTaskData(taskId) {
            showToast(`æ­£åœ¨å¯¼å‡ºä»»åŠ¡æ•°æ®ï¼š${taskId}`);
        }

        function fillForVillager(name) {
            showToast(`æ­£åœ¨ä¸º${name}ä»£å¡«è¡¨å•`);
        }

        function batchRemind() {
            showToast('å·²å‘15ä½æœªå®Œæˆæ‘æ°‘å‘é€å‚¬åŠé€šçŸ¥');
        }

        function updateNotificationTarget() {
            const target = document.getElementById('notification-target').value;
            showToast(`å·²é€‰æ‹©é€šçŸ¥å¯¹è±¡ï¼š${target}`);
        }

        function sendNotification() {
            const target = document.getElementById('notification-target');
            const targetText = target.options[target.selectedIndex].text;
            showToast(`æ­£åœ¨å‘${targetText}å‘é€é€šçŸ¥...`);
        }

        function configureForm() {
            showToast('æ­£åœ¨é…ç½®è¡¨å•è®¾ç½®...');
        }

        function searchVillager() {
            showToast('æ­£åœ¨æœç´¢æ‘æ°‘...');
        }

        // æ•°æ®å®¡æ ¸ç›¸å…³å‡½æ•°
        function updateSelection() {
            const checkboxes = document.querySelectorAll('.row-checkbox');
            const checkedCount = document.querySelectorAll('.row-checkbox:checked').length;
            document.getElementById('selected-count').textContent = `å·²é€‰æ‹© ${checkedCount} é¡¹`;
            
            const batchActions = document.getElementById('batch-actions');
            if (checkedCount > 0) {
                batchActions.classList.add('show');
            } else {
                batchActions.classList.remove('show');
            }
        }

        function approveRow(button) {
            const row = button.closest('.table-row');
            const badge = row.querySelector('.status-badge');
            const buttons = row.querySelectorAll('.action-btn-small');
            
            badge.textContent = 'å·²å®¡æ ¸';
            badge.className = 'status-badge status-approved';
            buttons.forEach(btn => btn.disabled = true);
            
            showToast('å®¡æ ¸é€šè¿‡');
        }

        function rejectRow(button) {
            const row = button.closest('.table-row');
            const badge = row.querySelector('.status-badge');
            const buttons = row.querySelectorAll('.action-btn-small');
            
            badge.textContent = 'å·²é©³å›';
            badge.className = 'status-badge status-rejected';
            buttons.forEach(btn => btn.disabled = true);
            
            showToast('å·²é©³å›');
        }

        function batchApprove() {
            const checkedBoxes = document.querySelectorAll('.row-checkbox:checked');
            let count = 0;
            
            checkedBoxes.forEach(checkbox => {
                const row = checkbox.closest('.table-row');
                const badge = row.querySelector('.status-badge');
                const buttons = row.querySelectorAll('.action-btn-small');
                
                if (!buttons[0].disabled) {
                    badge.textContent = 'å·²å®¡æ ¸';
                    badge.className = 'status-badge status-approved';
                    buttons.forEach(btn => btn.disabled = true);
                    count++;
                }
                
                checkbox.checked = false;
            });
            
            updateSelection();
            showToast(`æ‰¹é‡å®¡æ ¸é€šè¿‡ ${count} é¡¹`);
        }

        function batchReject() {
            const checkedBoxes = document.querySelectorAll('.row-checkbox:checked');
            let count = 0;
            
            checkedBoxes.forEach(checkbox => {
                const row = checkbox.closest('.table-row');
                const badge = row.querySelector('.status-badge');
                const buttons = row.querySelectorAll('.action-btn-small');
                
                if (!buttons[0].disabled) {
                    badge.textContent = 'å·²é©³å›';
                    badge.className = 'status-badge status-rejected';
                    buttons.forEach(btn => btn.disabled = true);
                    count++;
                }
                
                checkbox.checked = false;
            });
            
            updateSelection();
            showToast(`æ‰¹é‡é©³å› ${count} é¡¹`);
        }

        function exportData() {
            showToast('æ­£åœ¨å¯¼å‡ºExcelæ–‡ä»¶...');
            setTimeout(() => {
                showToast('æ–‡ä»¶å¯¼å‡ºæˆåŠŸï¼');
            }, 2000);
        }

        function shareToWechat() {
            showToast('æ­£åœ¨åˆ†äº«åˆ°å¾®ä¿¡...');
        }

        function saveToPhone() {
            showToast('æ­£åœ¨ä¿å­˜åˆ°æ‰‹æœº...');
        }

        // æ•°æ®æ²‰æ·€ç›¸å…³å‡½æ•°
        function resolveConflict(button, action) {
            const conflictCard = button.closest('.conflict-card');
            const name = conflictCard.querySelector('h4').textContent;
            
            let message = '';
            switch(action) {
                case 'accept':
                    message = `å·²é‡‡çº³ ${name} çš„æ–°å€¼`;
                    break;
                case 'keep':
                    message = `å·²ä¿ç•™ ${name} çš„æ—§å€¼`;
                    break;
                case 'manual':
                    message = `æ­£åœ¨æ‰‹åŠ¨ä¿®æ”¹ ${name} çš„æ•°æ®`;
                    break;
            }
            
            conflictCard.style.opacity = '0.5';
            conflictCard.style.pointerEvents = 'none';
            showToast(message);
        }

        // æ•°æ®ç»´æŠ¤ç›¸å…³å‡½æ•°
        function addVillager() {
            showToast('æ­£åœ¨æ·»åŠ æ–°æ‘æ°‘...');
        }

        function viewVillager(name) {
            showToast(`æ­£åœ¨æŸ¥çœ‹ ${name} çš„è¯¦ç»†ä¿¡æ¯`);
        }

        function editVillager(name) {
            showToast(`æ­£åœ¨ç¼–è¾‘ ${name} çš„ä¿¡æ¯`);
        }

        // æ‘æ°‘ç›¸å…³å‡½æ•°
        function fillForm() {
            showToast('æ­£åœ¨æ‰“å¼€å¡«æŠ¥è¡¨å•...');
        }

        // Toastæç¤ºå‡½æ•°
        function showToast(message) {
            // ç§»é™¤ç°æœ‰çš„toast
            const existingToast = document.querySelector('.toast');
            if (existingToast) {
                existingToast.remove();
            }
            
            // åˆ›å»ºæ–°çš„toast
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            // 2ç§’åè‡ªåŠ¨ç§»é™¤
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 2000);
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–é¡µé¢
            showPage('role-selection');
        });
        // OCRè¯†åˆ«ç›¸å…³åŠŸèƒ½
        let recognizedFields = [];
        let currentEditingField = null;

        // æ¨¡æ‹ŸOCRè¯†åˆ«è¿‡ç¨‹
        function simulateOCR() {
            showPage('ocr-result');
            
            // æ˜¾ç¤ºè¿›åº¦æ¡
            document.getElementById('ocr-progress').classList.remove('hidden');
            document.getElementById('ocr-fields').classList.add('hidden');
            
            let progress = 0;
            const progressBar = document.getElementById('progress-fill');
            const progressText = document.getElementById('progress-text');
            
            const progressTexts = [
                'æ­£åœ¨åˆ†ææ–‡ä»¶ç»“æ„...',
                'æ­£åœ¨è¯†åˆ«è¡¨æ ¼å­—æ®µ...',
                'æ­£åœ¨æå–å­—æ®µå†…å®¹...',
                'æ­£åœ¨ç”Ÿæˆå­—æ®µé…ç½®...',
                'è¯†åˆ«å®Œæˆï¼'
            ];
            
            const interval = setInterval(() => {
                progress += 20;
                progressBar.style.width = progress + '%';
                
                if (progress <= 80) {
                    progressText.textContent = progressTexts[Math.floor(progress / 20)];
                } else {
                    progressText.textContent = progressTexts[4];
                    clearInterval(interval);
                    
                    setTimeout(() => {
                        // éšè—è¿›åº¦æ¡ï¼Œæ˜¾ç¤ºè¯†åˆ«ç»“æœ
                        document.getElementById('ocr-progress').classList.add('hidden');
                        document.getElementById('ocr-fields').classList.remove('hidden');
                        
                        // ç”Ÿæˆæ¨¡æ‹Ÿçš„è¯†åˆ«å­—æ®µ
                        generateMockFields();
                    }, 500);
                }
            }, 800);
        }

        // ç”Ÿæˆæ¨¡æ‹Ÿè¯†åˆ«å­—æ®µ
        function generateMockFields() {
            recognizedFields = [
                {
                    id: 'field_1',
                    name: 'å§“å',
                    type: 'text',
                    required: true,
                    confidence: 0.95,
                    validation: '2-10ä¸ªå­—ç¬¦'
                },
                {
                    id: 'field_2',
                    name: 'èº«ä»½è¯å·',
                    type: 'idcard',
                    required: true,
                    confidence: 0.92,
                    validation: '18ä½èº«ä»½è¯å·ç '
                },
                {
                    id: 'field_3',
                    name: 'è”ç³»ç”µè¯',
                    type: 'phone',
                    required: true,
                    confidence: 0.88,
                    validation: '11ä½æ‰‹æœºå·ç '
                },
                {
                    id: 'field_4',
                    name: 'å®¶åº­ä½å€',
                    type: 'text',
                    required: false,
                    confidence: 0.85,
                    validation: 'è¯¦ç»†åœ°å€ä¿¡æ¯'
                },
                {
                    id: 'field_5',
                    name: 'èŒä¸š',
                    type: 'select',
                    required: false,
                    confidence: 0.78,
                    options: ['å†œæ°‘', 'å·¥äºº', 'æ•™å¸ˆ', 'åŒ»ç”Ÿ', 'å…¶ä»–'],
                    validation: 'ä»é€‰é¡¹ä¸­é€‰æ‹©'
                }
            ];
            
            renderFieldList();
            updateFieldCount();
        }

        // æ¸²æŸ“å­—æ®µåˆ—è¡¨
        function renderFieldList() {
            const fieldList = document.getElementById('field-list');
            fieldList.innerHTML = '';
            
            recognizedFields.forEach((field, index) => {
                const fieldItem = document.createElement('div');
                fieldItem.className = 'field-item';
                fieldItem.innerHTML = `
                    <div class="field-header">
                        <div class="field-info">
                            <div class="field-name">${field.name}</div>
                            <div class="field-meta">
                                <span class="field-tag">${getFieldTypeText(field.type)}</span>
                                ${field.required ? '<span class="field-tag required">å¿…å¡«</span>' : '<span class="field-tag">å¯é€‰</span>'}
                                <span class="field-tag">ç½®ä¿¡åº¦ ${Math.round(field.confidence * 100)}%</span>
                            </div>
                        </div>
                        <div class="field-actions">
                            <button class="field-btn" onclick="editField('${field.id}')" title="ç¼–è¾‘">âœï¸</button>
                            <button class="field-btn" onclick="deleteField('${field.id}')" title="åˆ é™¤">ğŸ—‘ï¸</button>
                        </div>
                    </div>
                    <div class="field-content">
                        <div class="field-preview">
                            ${getFieldPreview(field)}
                        </div>
                    </div>
                `;
                fieldList.appendChild(fieldItem);
            });
        }

        // è·å–å­—æ®µç±»å‹æ–‡æœ¬
        function getFieldTypeText(type) {
            const typeMap = {
                'text': 'æ–‡æœ¬',
                'number': 'æ•°å­—',
                'phone': 'æ‰‹æœºå·',
                'idcard': 'èº«ä»½è¯',
                'email': 'é‚®ç®±',
                'date': 'æ—¥æœŸ',
                'select': 'ä¸‹æ‹‰é€‰æ‹©'
            };
            return typeMap[type] || 'æ–‡æœ¬';
        }

        // è·å–å­—æ®µé¢„è§ˆ
        function getFieldPreview(field) {
            switch (field.type) {
                case 'text':
                    return `è¯·è¾“å…¥${field.name}`;
                case 'number':
                    return `è¯·è¾“å…¥æ•°å­—`;
                case 'phone':
                    return `è¯·è¾“å…¥11ä½æ‰‹æœºå·ç `;
                case 'idcard':
                    return `è¯·è¾“å…¥18ä½èº«ä»½è¯å·ç `;
                case 'email':
                    return `è¯·è¾“å…¥é‚®ç®±åœ°å€`;
                case 'date':
                    return `è¯·é€‰æ‹©æ—¥æœŸ`;
                case 'select':
                    return `è¯·é€‰æ‹©ï¼š${field.options ? field.options.join('ã€') : 'é€‰é¡¹1ã€é€‰é¡¹2ã€é€‰é¡¹3'}`;
                default:
                    return `è¯·è¾“å…¥${field.name}`;
            }
        }

        // æ›´æ–°å­—æ®µæ•°é‡
        function updateFieldCount() {
            document.getElementById('field-count').textContent = recognizedFields.length;
        }

        // ç¼–è¾‘å­—æ®µ
        function editField(fieldId) {
            const field = recognizedFields.find(f => f.id === fieldId);
            if (!field) return;
            
            currentEditingField = fieldId;
            
            // å¡«å……ç¼–è¾‘è¡¨å•
            document.getElementById('edit-field-name').value = field.name;
            document.getElementById('edit-field-type').value = field.type;
            document.getElementById('edit-field-required').checked = field.required;
            document.getElementById('edit-field-validation').value = field.validation || '';
            
            if (field.options) {
                document.getElementById('edit-field-options').value = field.options.join('\n');
            }
            
            // æ˜¾ç¤º/éšè—é€‰é¡¹è®¾ç½®
            toggleSelectOptions(field.type);
            
            // æ˜¾ç¤ºæ¨¡æ€æ¡†
            document.getElementById('field-edit-modal').classList.remove('hidden');
        }

        // åˆ é™¤å­—æ®µ
        function deleteField(fieldId) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå­—æ®µå—ï¼Ÿ')) {
                recognizedFields = recognizedFields.filter(f => f.id !== fieldId);
                renderFieldList();
                updateFieldCount();
                showToast('å­—æ®µå·²åˆ é™¤');
            }
        }

        // æ–°å¢è‡ªå®šä¹‰å­—æ®µ
        function addCustomField() {
            const newField = {
                id: 'field_' + Date.now(),
                name: 'æ–°å­—æ®µ',
                type: 'text',
                required: false,
                confidence: 1.0,
                validation: ''
            };
            
            recognizedFields.push(newField);
            renderFieldList();
            updateFieldCount();
            
            // è‡ªåŠ¨ç¼–è¾‘æ–°å­—æ®µ
            editField(newField.id);
        }

        // ä¿å­˜å­—æ®µç¼–è¾‘
        function saveFieldEdit() {
            if (!currentEditingField) return;
            
            const field = recognizedFields.find(f => f.id === currentEditingField);
            if (!field) return;
            
            const name = document.getElementById('edit-field-name').value.trim();
            if (!name) {
                showToast('è¯·è¾“å…¥å­—æ®µåç§°');
                return;
            }
            
            // æ›´æ–°å­—æ®µä¿¡æ¯
            field.name = name;
            field.type = document.getElementById('edit-field-type').value;
            field.required = document.getElementById('edit-field-required').checked;
            field.validation = document.getElementById('edit-field-validation').value.trim();
            
            // å¤„ç†é€‰é¡¹
            if (field.type === 'select') {
                const optionsText = document.getElementById('edit-field-options').value.trim();
                field.options = optionsText ? optionsText.split('\n').filter(opt => opt.trim()) : [];
            } else {
                delete field.options;
            }
            
            // é‡æ–°æ¸²æŸ“
            renderFieldList();
            closeFieldModal();
            showToast('å­—æ®µå·²ä¿å­˜');
        }

        // å…³é—­å­—æ®µç¼–è¾‘æ¨¡æ€æ¡†
        function closeFieldModal() {
            document.getElementById('field-edit-modal').classList.add('hidden');
            currentEditingField = null;
        }

        // åˆ‡æ¢é€‰é¡¹è®¾ç½®æ˜¾ç¤º
        function toggleSelectOptions(fieldType) {
            const optionsGroup = document.getElementById('select-options-group');
            if (fieldType === 'select') {
                optionsGroup.style.display = 'block';
            } else {
                optionsGroup.style.display = 'none';
            }
        }

        // å­—æ®µç±»å‹æ”¹å˜äº‹ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            const fieldTypeSelect = document.getElementById('edit-field-type');
            if (fieldTypeSelect) {
                fieldTypeSelect.addEventListener('change', function() {
                    toggleSelectOptions(this.value);
                });
            }
        });

        // ä¿å­˜è‰ç¨¿
        function saveAsDraft() {
            const draftData = {
                fields: recognizedFields,
                timestamp: new Date().toISOString(),
                name: 'è¡¨æ ¼è‰ç¨¿_' + new Date().toLocaleDateString()
            };
            
            // æ¨¡æ‹Ÿä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('form_draft', JSON.stringify(draftData));
            showToast('è‰ç¨¿å·²ä¿å­˜');
        }

        // ç”Ÿæˆè¡¨å•
        function generateForm() {
            if (recognizedFields.length === 0) {
                showToast('è¯·è‡³å°‘æ·»åŠ ä¸€ä¸ªå­—æ®µ');
                return;
            }
            
            // éªŒè¯å¿…è¦å­—æ®µ
            const invalidFields = recognizedFields.filter(field => !field.name.trim());
            if (invalidFields.length > 0) {
                showToast('è¯·å®Œå–„æ‰€æœ‰å­—æ®µçš„åç§°');
                return;
            }
            
            showToast('è¡¨å•ç”ŸæˆæˆåŠŸï¼æ­£åœ¨è·³è½¬åˆ°æ•°æ®é‡‡é›†é¡µé¢...');
            
            setTimeout(() => {
                showPage('data-collection');
            }, 1500);
        }

        // ä»£å¡«ç›¸å…³åŠŸèƒ½
        function fillForVillager(villagerName) {
            // è®¾ç½®ä»£å¡«æ‘æ°‘ä¿¡æ¯
            document.getElementById('proxy-villager-name').textContent = `ä¸º ${villagerName} ä»£å¡«è¡¨å•`;
            document.getElementById('proxy-name').value = villagerName;
            
            // æ ¹æ®æ‘æ°‘å§“åè®¾ç½®ä¸åŒçš„èº«ä»½è¯å·ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
            const villagerData = {
                'å¼ ä¸‰': '320***********1234',
                'æå››': '320***********5678',
                'ç‹äº”': '320***********9012'
            };
            
            document.getElementById('proxy-idcard').value = villagerData[villagerName] || '320***********0000';
            
            // æ¸…ç©ºå…¶ä»–å­—æ®µ
            document.getElementById('proxy-phone').value = '';
            document.getElementById('proxy-address').value = '';
            document.getElementById('proxy-job').value = '';
            document.getElementById('proxy-note').value = '';
            
            // è·³è½¬åˆ°ä»£å¡«è¡¨å•é¡µé¢
            showPage('proxy-fill-form');
            showToast(`æ­£åœ¨ä¸º ${villagerName} ä»£å¡«è¡¨å•`);
        }

        // æäº¤ä»£å¡«è¡¨å•
        function submitProxyForm() {
            const name = document.getElementById('proxy-name').value;
            const phone = document.getElementById('proxy-phone').value;
            const note = document.getElementById('proxy-note').value;
            
            if (!phone.trim()) {
                showToast('è¯·è¾“å…¥è”ç³»ç”µè¯');
                return;
            }
            
            if (!note.trim()) {
                showToast('è¯·å¡«å†™ä»£å¡«è¯´æ˜');
                return;
            }
            
            showToast(`${name} çš„è¡¨å•æäº¤æˆåŠŸï¼`);
            
            setTimeout(() => {
                showPage('data-collection');
                // åˆ‡æ¢åˆ°ä»»åŠ¡çœ‹æ¿æŸ¥çœ‹ç»“æœ
                switchCollectionTab('kanban');
            }, 1500);
        }

        // æ‘æ°‘å¡«æŠ¥åŠŸèƒ½
        function fillForm() {
            // è‡ªåŠ¨åŠ è½½æ‘æ°‘ä¿¡æ¯ï¼ˆæ¨¡æ‹Ÿå½“å‰ç™»å½•æ‘æ°‘ï¼‰
            document.getElementById('villager-name').value = 'å¼ ä¸‰';
            document.getElementById('villager-idcard').value = '320***********1234';
            document.getElementById('villager-phone').value = '';
            document.getElementById('villager-address').value = '';
            document.getElementById('villager-job').value = '';
            
            // è·³è½¬åˆ°æ‘æ°‘å¡«æŠ¥é¡µé¢
            showPage('villager-fill-form');
            showToast('æ­£åœ¨åŠ è½½æ‚¨çš„å¾…å¡«è¡¨å•...');
        }

        // æäº¤æ‘æ°‘è¡¨å•
        function submitVillagerForm() {
            const phone = document.getElementById('villager-phone').value;
            
            if (!phone.trim()) {
                showToast('è¯·è¾“å…¥è”ç³»ç”µè¯');
                return;
            }
            
            showToast('è¡¨å•æäº¤æˆåŠŸï¼æ„Ÿè°¢æ‚¨çš„é…åˆ');
            
            setTimeout(() => {
                showPage('villager-main');
            }, 1500);
        }

        // ä¿å­˜è‰ç¨¿åŠŸèƒ½
        function saveDraft() {
            showToast('è‰ç¨¿å·²ä¿å­˜');
        }

        // æ•°æ®é‡‡é›†Tabåˆ‡æ¢åŠŸèƒ½
        function switchCollectionTab(tabName) {
            // éšè—æ‰€æœ‰tabå†…å®¹
            document.querySelectorAll('#data-collection .mobile-tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // ç§»é™¤æ‰€æœ‰tabçš„activeçŠ¶æ€
            document.querySelectorAll('#data-collection .mobile-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // æ˜¾ç¤ºé€‰ä¸­çš„tabå†…å®¹
            const targetContent = document.getElementById(tabName + '-tab');
            if (targetContent) {
                targetContent.classList.add('active');
            }
            
            // æ¿€æ´»é€‰ä¸­çš„tab
            event.currentTarget.classList.add('active');
        }

        // ä¿®æ”¹åŸæœ‰çš„ä¸Šä¼ é€‰æ‹©å‡½æ•°
        function selectUploadType(type) {
            hideUploadMenu();
            
            if (type === 'local') {
                showToast('æ­£åœ¨æ‰“å¼€æ–‡ä»¶é€‰æ‹©å™¨...');
                setTimeout(() => {
                    simulateOCR();
                }, 1000);
            } else if (type === 'wechat') {
                showToast('æ­£åœ¨è¿æ¥å¾®ä¿¡...');
                setTimeout(() => {
                    simulateOCR();
                }, 1000);
            }
        }

        // ä¿®æ”¹æ‹ç…§è¯†åˆ«å‡½æ•°
        function startCamera() {
            showToast('æ­£åœ¨å¯åŠ¨ç›¸æœº...');
            setTimeout(() => {
                simulateOCR();
            }, 1000);
        }

    </script>
</body>
</html>